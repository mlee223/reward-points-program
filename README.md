# Reward Program

A retailer offers a rewards program to its customers, awarding points based on each recorded purchase.

A customer receives 2 points for every dollar spent over $100 in each transaction, plus 1 point for every dollar spent over $50 in each transaction.

Given a record of every transaction during a three month period, calculate the reward points earned for each customer per month and total.

The data model implemented is in `src/data`

## Installation and Getting Started

Run `yarn install` and `yarn start` to run the React application on https://localhost:3000/.

```zsh
yarn install
yarn start
```

### Contexts

Created a `RewardsContext` which provides a way to share data (customers, transactions, rewards) through components tree.

In this context, updateCustomers and updateTransactions methods are defined, which are called after API requests for fetching customers and transactions data.

On receiving customers and transactions data, rewards are calculated so that we can access rewards data by using custom hooks.

### Hooks
	
`useRewardsContext` - Reading and subscribing to context from components

`useRewardsSelector` - Selecting rewards by customer ID

### Types

Defined constants can be used to adjust the points calculation
```
export const OVER_50_DEFAULT = 1;
export const OVER_100_DEFAULT = 2;
```

### Data

`api.js` defining api requests (returning mock data from db.json) 
	
`db.json` generated by generateMockData.js

	fetchCustomers returns customers data from db.json
	fetchTransactions returns transactions data from db.json

```
{
  customers: [
    {
      id: "customer_",
      name: "",
      paymentInfo: "cc_",
      email: "",
      phone: "",
      address: { street: "", city: "", state: "", country: "", zip: "" },
    },
  ],
  transactions: [
    {
      id: "transaction_",
      createdAt: "",
      purchaseAmount: 100,
      customerId: "customer_",
      purchase: [
        {
          product: "",
          productDescription: "",
          price: 100,
          productDepartment: "",
        },
      ],
    },
  ],
}
```

### Pages

Inside `Home` component, customers and transactions data are fetched by using api() and updated  values via context (updateCustomers, updateTransactions)

Home page displays the customers table by default.

Clicking customer row, it displays the modal (`RewardTable`) containing rewards details. 


### Tests

Basically, added a test for customer table

```zsh
yarn test
```
